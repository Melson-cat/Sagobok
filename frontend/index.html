<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BokPiloten – Skapa din AI-illustrerade bok</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet" />
  <meta name="description" content="Skapa en personlig barnbok på några minuter – text, illustrationer och PDF redo för tryck." />
</head>
<body data-theme="kids">
  <noscript>
    <div style="padding:12px;background:#fee;border:1px solid #f99;color:#900;text-align:center">
      Den här sidan kräver JavaScript för att fungera.
    </div>
  </noscript>

  <!-- Global Header -->
  <header class="site-header" role="banner">
    <a href="/index.html" class="brand" aria-label="BokPiloten startsida">
      <img src="images/pilot-logo.png" alt="BokPiloten" />
      <span>BokPiloten</span>
    </a>
    <nav class="main-nav" aria-label="Huvudmeny">
      <a href="/index.html" data-nav="home">Hem</a>
      <a href="#bookForm" data-nav="create">Skapa bok</a>
      <a href="#examples" data-nav="examples">Exempel</a>
      <a href="#about" data-nav="about">Om oss</a>
      <a href="/status.html" data-nav="status">Status</a>
    </nav>
    <button id="navToggle" class="hamburger" aria-label="Meny" aria-expanded="false" aria-controls="mobileMenu">☰</button>
  </header>

  <!-- Mobilmeny -->
  <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
    <nav>
      <a href="/index.html">Hem</a>
      <a href="/index.html#bookForm">Skapa bok</a>
      <a href="/index.html#examples">Exempel</a>
      <a href="/index.html#about">Om oss</a>
      <a href="/status.html">Status</a>
    </nav>
  </div>

  <main class="container">
    <section class="intro" aria-labelledby="pageTitle">
      <h1 id="pageTitle">Skapa din egen AI-illustrerade bok</h1>
      <p>Fyll i några detaljer, välj stil och se din berättelse ta form med både text och bilder.</p>
    </section>

    <!-- FORMULÄR -->
    <section id="bookForm" class="panel" aria-labelledby="formTitle">
      <h2 id="formTitle" class="sr-only">Formulär för att skapa bok</h2>

      <form id="storyForm" novalidate>
        <!-- Rad 0: Kategori -->
        <div class="form-row">
          <div class="field col-span-3">
            <label>Kategori</label>
            <div class="seg" role="tablist" aria-label="Kategori">
              <button type="button" class="seg-btn active" id="catKidsBtn" role="tab" aria-selected="true">Barn</button>
              <button type="button" class="seg-btn" id="catPetsBtn" role="tab" aria-selected="false">Husdjur</button>
            </div>
          </div>
        </div>

        <!-- Rad 1: Namn, Ålder, Läsålder -->
        <div class="form-row">
          <div class="field">
            <label for="name">Namn</label>
            <input id="name" placeholder="Ex: Nova" autocomplete="name" />
          </div>

         <div class="field">
  <label for="age" id="ageLabel">Ålder (hjälte)</label>
  <input id="age" type="number" min="1" max="120" value="6" inputmode="numeric" />
  <p class="hint" id="ageHint">Barnets/djurets ålder för bibeln (frivilligt för husdjur).</p>
</div>

          

          <div class="field">
            <label for="readingAge">Läsålder</label>
            <div class="seg" role="tablist" aria-label="Läsålder">
              <button type="button" class="seg-btn" data-readage="4-5">4–5</button>
              <button type="button" class="seg-btn active" data-readage="6-8">6–8</button>
              <button type="button" class="seg-btn" data-readage="9-12">9–12</button>
              <button type="button" class="seg-btn" data-readage="familj">Familj</button>
            </div>
            <input id="readingAge" type="number" min="3" max="12" value="6" class="hidden" />
            <p class="hint">Välj nivå – eller ställ in exakt siffra via avancerat.</p>
            <label class="sr-only" for="readingAge">Anpassad läsålder</label>
          </div>
        </div>

        <!-- Rad 1b: Stil, Tema och fast sidantal -->
        <div class="form-row">
          <div class="field">
            <label for="style">Illustrationsstil</label>
            <select id="style">
              <option value="cartoon" selected>Cartoon (tecknad, uttrycksfull)</option>
              <option value="pixar">3D animerad (Pixar-känsla)</option>
              <option value="storybook">Barnbok / Akvarell</option>
              <option value="comic">Serietidning</option>
              <option value="painting">Målad (mjuk/painterly)</option>
            </select>
          </div>

          <div class="field">
            <label for="theme">Tema / kort handling</label>
            <input id="theme" placeholder="Ex: Skogsäventyr vid bäcken" />
          </div>

          <div class="field">
            <label>Sidor</label>
            <input value="Fast: 32 (framsida + 30 blad + baksida)" readonly />
            <p class="hint">Inlaga: titel + 14 uppslag (bild vänster / text höger) + slut.</p>
          </div>
        </div>

        <!-- Karaktärsreferens -->
        <div class="form-row" aria-labelledby="refTitle">
          <div class="field col-span-3">
            <label id="refTitle">Karaktärsreferens</label>
            <div class="seg" role="tablist" aria-label="Karaktärsreferens">
              <button type="button" class="seg-btn" id="refDescBtn" role="tab" aria-selected="false">Beskrivning</button>
              <button type="button" class="seg-btn active" id="refPhotoBtn" role="tab" aria-selected="true">Foto</button>
            </div>
          </div>

          <!-- Fler karaktärer (valfritt) -->
<div class="form-row">
  <div class="field col-span-3">
    <label for="extraCharsToggle">Fler karaktärer (valfritt)</label>
    <div class="checkbox-row">
      <input type="checkbox" id="extraCharsToggle" />
      <span>Lägg till upp till tre extra figurer i storyn.</span>
    </div>
    <p class="hint">Exempel: bästis, syskon, husdjur, förälder.</p>
  </div>
</div>

<div class="form-row hidden" id="extraCharsContainer" aria-live="polite">
  <div class="field col-span-3 extra-char" data-extra-char-row="0">
    <label>Karaktär 1</label>
    <div class="field-row">
      <input type="text" placeholder="Namn" data-extra-name />
      <input type="text" placeholder="Roll (t.ex. bästis)" data-extra-role />
    </div>
  </div>

  <div class="field col-span-3 extra-char" data-extra-char-row="1">
    <label>Karaktär 2</label>
    <div class="field-row">
      <input type="text" placeholder="Namn" data-extra-name />
      <input type="text" placeholder="Roll (t.ex. storebror)" data-extra-role />
    </div>
  </div>

  <div class="field col-span-3 extra-char" data-extra-char-row="2">
    <label>Karaktär 3</label>
    <div class="field-row">
      <input type="text" placeholder="Namn" data-extra-name />
      <input type="text" placeholder="Roll (t.ex. granne)" data-extra-role />
    </div>
  </div>
</div>


          <!-- Beskrivning -->
          <div class="field col-span-2 hidden" id="traitsBlock">
            <label for="traits">Kännetecken (beskrivning)</label>
            <textarea id="traits" rows="3" placeholder="Ex: lockigt hår, blå jacka, gula stövlar, ryggsäck med stjärna"></textarea>
            <p class="hint">Kort och konkret – hjälper AI:n hålla karaktären konsekvent.</p>
          </div>

          <!-- Foto -->
          <div class="field col-span-2" id="photoBlock">
            <label for="charPhoto">Ladda upp foto (valfritt)</label>
            <input id="charPhoto" type="file" accept="image/*" />
            <div class="upload-preview" aria-live="polite">
              <img id="photoPreview" class="hidden" alt="Förhandsvisning av referensfoto" />
            </div>
            <p class="hint">Används om bild-till-bild stöds. Annars faller vi tillbaka på beskrivning.</p>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="btn btn-primary">Skapa förhandsvisning</button>
          <button id="demoBtn" type="button" class="btn btn-ghost">Visa demo</button>
        </div>
      </form>
    </section>

    <!-- FÖRHANDSVISNING -->
    <section id="preview" class="hidden" aria-labelledby="previewTitle">
      <h2 id="previewTitle">Förhandsvisning</h2>
      <div id="statusBar" class="status-bar hidden" aria-live="polite"></div>

      <p class="preview-note">
        Du ser de <strong>4 första</strong> sidorna skarpt först. Resterande låses upp när alla illustrationer är klara.
      </p>

      <div id="bookPreview" class="thumb-grid" role="list"></div>

      <div class="actions" style="margin-top:16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">
        <button id="pdfBtn"      type="button" class="btn btn-secondary" aria-describedby="pdfHelp">Skapa PDF</button>
        <button id="buyPdfBtn"   type="button" class="btn btn-primary">Köp digital bok</button>
        <button id="buyPrintBtn" type="button" class="btn btn-accent">Köp tryckt bok</button>
      </div>
    </section>

    <!-- Dummy-ankare för menyn -->
    <section id="examples" class="about" aria-labelledby="exTitle">
      <h3 id="exTitle">Exempel</h3>
      <p class="hint">Kommer snart.</p>
    </section>

    <section id="about" class="about" aria-labelledby="aboutTitle">
      <h3 id="aboutTitle">Om BokPiloten</h3>
      <p>Vi hjälper dig skapa personliga, AI-illustrerade böcker – snabbt och enkelt.</p>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <p>© 2025 BokPiloten</p>
  </footer>

  <script>
  // Minimal header-controller (delad på alla sidor)
  (function () {
    const toggle = document.getElementById("navToggle");
    const menu = document.getElementById("mobileMenu");
    if (toggle && menu) {
      const setOpen = (open) => {
        toggle.setAttribute("aria-expanded", String(open));
        menu.setAttribute("aria-hidden", String(!open));
        menu.classList.toggle("open", open);
      };
      setOpen(false);
      toggle.addEventListener("click", () => {
        const isOpen = toggle.getAttribute("aria-expanded") === "true";
        setOpen(!isOpen);
      });
      menu.addEventListener("click", (e) => {
        if (e.target && e.target.tagName === "A") setOpen(false);
      });
    }
  })();
  </script>
  <script src="script.js" defer></script>
</body>
</html>
