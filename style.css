@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');

:root{
  --brand:#668068; --accent:#c0cfc1;
  --light:#f7f7f2; --dark:#2b2b2b;
  --r:14px; --sh:0 6px 18px rgba(0,0,0,.12);
}

/* Teman */
body[data-theme="kids"]{ --brand:#3c8f6f; --accent:#bfe4d2; --light:#f4fbf7; }
body[data-theme="pets"]{ --brand:#ff8b66; --accent:#ffe1d6; --light:#fff8f4; }
body[data-theme="adult"]{ --brand:#1b2a6b; --accent:#cdd6ff; --light:#f1f4ff; }

/* Bas */
*{box-sizing:border-box;margin:0;padding:0}
html,body{max-width:100%;overflow-x:hidden}
body{
  font:400 17px/1.5 Quicksand,sans-serif; color:var(--dark);
  background:linear-gradient(135deg,var(--light),#fff);
  padding-top:86px;
}
.container{max-width:980px;margin:auto;padding:0 20px}
.hidden{display:none}

/* Header */
.site-header{
  position:fixed; inset:0 0 auto 0; height:70px; z-index:1000;
  display:flex; align-items:center; gap:16px;
  padding:0 clamp(16px,4vw,48px);
  background:#fff; box-shadow:0 1px 6px rgba(0,0,0,.08);
}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--dark)}
.brand img{height:44px; width:auto}
.brand span{font-weight:700;font-size:18px}
.main-nav{display:flex;gap:32px;margin-left:auto}
.main-nav a{
  position:relative; text-decoration:none; color:#222; font-weight:600;
}
.main-nav a::after{
  content:""; position:absolute; left:0; bottom:-6px; height:2px; width:0;
  background:var(--brand); transition:width .25s;
}
.main-nav a:hover{color:var(--brand)}
.main-nav a:hover::after{width:100%}
.hamburger{display:none}

/* Mobilmeny (dold default) */
.mobile-menu{position:fixed; inset:0; background:#0000; pointer-events:none; opacity:0; transition:.25s;}
.mobile-menu.open{background:#0005; pointer-events:auto; opacity:1;}
.mobile-menu nav{
  position:absolute; right:0; top:0; height:100%; width:min(80%,320px);
  background:#fff; padding:90px 24px; display:flex; flex-direction:column; gap:18px;
  box-shadow:-4px 0 12px rgba(0,0,0,.08);
}
.mobile-menu a{text-decoration:none;color:#222;font-weight:600}

/* Intro */
.intro{text-align:center;margin:34px auto 18px;max-width:720px}
.intro h1{font-size:30px;color:var(--brand);margin-bottom:8px}
.intro p{font-size:18px;color:#444}

/* Panel (form) */
.panel{
  background:linear-gradient(180deg, color-mix(in srgb, var(--light) 85%, #fff 15%), #fff 100%);
  border:1px solid color-mix(in srgb, var(--brand) 12%, #e8eee9 88%);
  padding:22px 22px 18px; border-radius:18px; box-shadow:var(--sh);
}

/* Form */
.form-row{
  display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-bottom:12px; align-items:end;
}
.field label{display:block;font-weight:700;font-size:14px;color:var(--brand);margin:4px}
input,select,textarea{
  width:100%; padding:12px 14px; border-radius:12px; border:1px solid #cfd6d2;
  background: color-mix(in srgb, #fff 97%, var(--brand) 3%);
  font:400 16px Quicksand,sans-serif; color:#2a2a2a;
  transition:border .2s, box-shadow .2s;
}
input:focus,select:focus,textarea:focus{
  outline:none; border-color:var(--brand);
  box-shadow:0 0 0 3px color-mix(in srgb, var(--brand) 18%, transparent);
}
textarea{min-height:96px;resize:vertical}
.upload-preview{margin-top:8px}
.upload-preview img{width:84px;height:84px;object-fit:cover;border-radius:10px;border:1px solid #e3e6e4}

/* Buttons */
.actions{display:flex;gap:10px;margin-top:14px}
.btn{
  flex:1; padding:13px 16px; border:none; border-radius:12px; cursor:pointer; font-weight:700;
  transition:transform .2s, box-shadow .2s;
}
.btn-primary{color:#fff; background:linear-gradient(90deg,var(--brand),var(--accent)); box-shadow:var(--sh)}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 10px 24px rgba(0,0,0,.16)}
.btn-ghost{background:#fff;color:var(--brand);border:1px solid var(--brand)}
.btn-ghost:hover{background:var(--brand);color:#fff}

/* Preview */
#preview{text-align:center;margin:28px 0 50px}
.preview-note{color:#666}
.thumb-grid{
  margin-top:16px;
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:12px;
}
@media (max-width:900px){ .thumb-grid{grid-template-columns:repeat(3, 1fr)} }
@media (max-width:640px){ .thumb-grid{grid-template-columns:repeat(2, 1fr)} }

.thumb{
  position:relative;
  background:#fff; border:1px solid #e8ebe8; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.06);
  overflow:hidden; text-align:left;
}
.thumb .imgwrap{
  width:100%; height:140px; overflow:hidden; background:#f3f5f4;
}
.thumb img{width:100%; height:100%; object-fit:cover; display:block}
.thumb .txt{padding:10px 12px; font-size:14px}

/* Lås/blur för sidor > 4 */
.thumb.locked .imgwrap{filter:blur(7px)}
.thumb.locked::after{
  content:"Lås upp i nästa steg";
  position:absolute; inset:auto 8px 8px 8px; background:rgba(0,0,0,.55);
  color:#fff; font-weight:700; font-size:12px; padding:6px 8px; border-radius:10px;
}
/* Status-bar över preview */
.status-bar{
  margin: 0 0 10px;
  background:#fffaf0;
  border:1px solid #ffe7c2;
  color:#5a4a2a;
  padding:8px 10px;
  border-radius:10px;
}
.status-bar.hidden{display:none}

/* Preview-skeleton & fallback */
.skeleton{
  width:100%; height:100%;
  background: linear-gradient(90deg, #f2f2f2 0%, #fafafa 50%, #f2f2f2 100%);
  background-size: 200% 100%;
  animation: shine 1.2s linear infinite;
}
@keyframes shine{ 0%{background-position:200% 0} 100%{background-position:-200% 0} }
.img-fallback{
  display:grid; place-items:center; height:100%;
  color:#777; font-size:12px; background:#f5f5f5;
}
/* Grid helpers för RAD 3 */
.col-span-3 { grid-column: span 3; }
.col-span-2 { grid-column: span 2; }

/* Segmented toggle */
.seg{display:inline-flex;gap:8px;background:#fff;border:1px solid #dfe5e1;border-radius:999px;padding:4px;box-shadow:0 1px 4px rgba(0,0,0,.04)}
.seg-btn{
  padding:8px 14px;border:none;border-radius:999px;background:transparent;color:#2a2a2a;
  font:700 14px Quicksand,sans-serif;cursor:pointer;transition:.15s;
}
.seg-btn:hover{background:#f4f7f5}
.seg-btn.active{background:linear-gradient(90deg,var(--brand),var(--accent));color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.08)}
.hint{color:#6b7c75;font-size:12px;margin-top:6px}
.btn-primary[disabled]{opacity:.7;cursor:not-allowed}
.btn-primary .spinner{
  display:inline-block;width:16px;height:16px;margin-left:8px;
  border:2px solid #fff;border-right-color:transparent;border-radius:50%;
  animation:spin .7s linear infinite;vertical-align:-2px;
}
@keyframes spin{to{transform:rotate(360deg)}}
